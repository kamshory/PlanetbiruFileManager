let angle=0,fliph=0,flipv=0,resize=0,imgwidth=1,imgheight=1,crop=0,filepath="",fileurl="",arrthumbnail=[],arrthumbnailURL=[],startX,startY,endX,endY,centerX,centerY,width,height,show=!1,xhr;if(window.XMLHttpRequest)xhr=new XMLHttpRequest;else{let versions=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"];for(let i=0,len=versions.length;i<len;i++)try{xhr=new ActiveXObject(versions[i]);break}catch(e){}}function setInputSelection(e,t,i){if(e.focus(),void 0!==e.selectionStart)e.selectionStart=t,e.selectionEnd=i;else if(document.selection&&document.selection.createRange){e.select();let a=document.selection.createRange();a.collapse(!0),a.moveEnd("character",i),a.moveStart("character",t),a.select()}}function initPreviewImageUpload(){$(document).on("click","#image-list li img",function(){let e=$(this).attr("src");show=!0,width=parseFloat($(this).width()),height=parseFloat($(this).height());let t=6*width,i=6*height;startX=parseFloat($(this).offset().left),startY=parseFloat($(this).offset().top),centerX=parseFloat($(window).width())/2,centerY=parseFloat($(window).height())/2,endX=centerX-t/2-5,endY=centerY-i/2-5,$(".preview-image").remove(),show=!0,$("<img/>").attr("src",e).addClass("preview-image").css({width:width+"px",height:height+"px",position:"absolute","z-index":"5000",left:startX+"px",top:startY+"px",border:"1px solid #CCCCCC","border-radius":"1px",padding:"4px","background-color":"#FFFFFF","box-shadow":"0 0 2px #CCCCCC"}).appendTo("body"),$(".preview-image").animate({width:t,height:i,left:endX,top:endY},200),$(".preview-image, .ui-dialog, .ui-widget-overlay").click(function(){show=!1,$(".preview-image").animate({width:width,height:height,left:startX,top:startY},200,function(){show||$(".preview-image").remove()})})})}function updateToolbarStatus(){$(".fileid:checked").length==$(".fileid").length?$(".toolbar-inner li a img.check").parent().parent().addClass("inactive"):$(".toolbar-inner li a img.check").parent().parent().removeClass("inactive"),""==clipboardfile.operation?$(".toolbar-inner li a img.paste").parent().parent().addClass("inactive"):$(".toolbar-inner li a img.paste").parent().parent().removeClass("inactive"),0==$(".fileid:checked").length?($(".toolbar-inner li a img.uncheck").parent().parent().addClass("inactive"),$(".toolbar-inner li a img.copy").parent().parent().addClass("inactive"),$(".toolbar-inner li a img.cut").parent().parent().addClass("inactive"),$(".toolbar-inner li a img.move").parent().parent().addClass("inactive"),$(".toolbar-inner li a img.delete").parent().parent().addClass("inactive"),$(".toolbar-inner li a img.rename").parent().parent().addClass("inactive"),$(".toolbar-inner li a img.compress").parent().parent().addClass("inactive"),$(".toolbar-inner li a img.permission").parent().parent().addClass("inactive")):($(".toolbar-inner li a img.uncheck").parent().parent().removeClass("inactive"),$(".toolbar-inner li a img.copy").parent().parent().removeClass("inactive"),$(".toolbar-inner li a img.cut").parent().parent().removeClass("inactive"),$(".toolbar-inner li a img.move").parent().parent().removeClass("inactive"),$(".toolbar-inner li a img.delete").parent().parent().removeClass("inactive"),$(".toolbar-inner li a img.rename").parent().parent().removeClass("inactive"),$(".toolbar-inner li a img.compress").parent().parent().removeClass("inactive"),$(".toolbar-inner li a img.permission").parent().parent().removeClass("inactive")),$('.row-data-file[data-file-type="application/zip"]').find("input[type=checkbox]:checked").length?$(".toolbar-inner li a img.extract").parent().parent().removeClass("inactive"):$(".toolbar-inner li a img.extract").parent().parent().addClass("inactive"),$(document).on("click",".toolbar-inner li.inactive a",function(){return!1})}function addslashes(e){let t="\\'",i=RegExp("'","g");return e.replace(i,t)}function basename(e){return e.replace(/\\/g,"/").replace(/.*\//,"")}function dirname(e){return e.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function getfileextension(e){return/[.]/.exec(e)?/[^.]+$/.exec(e):""}function removefileextension(e){return e.replace(/\.[^/.]+$/,"")}function setCheckRelation(){$(document).on("change",".checkbox-selector",function(){let e=$(this)[0].checked,t=$(this).attr("data-target"),i=$(t).length;if(e)for(let a=0;a<i;a++)$(t)[a].checked=!0;else for(let o=0;o<i;o++)$(t)[o].checked=!1;updateToolbarStatus()})}function jqAlert(e,t,i,a){$("#mb-area").remove(),$("body").append('<div id="mb-area" style="display:none;"><div id="message-box-dialog"><div id="message-box-dialog-inner"></div></div></div>'),t||(t="Alert"),i||(i=300),a||(a=165);try{$("#message-box-dialog").dialog("destroy")}catch(o){}$("#message-box-dialog-inner").html(e),$("#message-box-dialog").dialog({width:i,height:a,modal:!0,title:t,buttons:{Close:function(){try{$("#message-box-dialog").dialog("destroy")}catch(e){}}}})}function contextMenu(e,t){$(e).on("contextmenu",function(i){i.preventDefault();let a=parseInt(i.clientX),o=i.clientY,l,n=$(document).scrollLeft(),r=$(document).scrollTop();a=parseInt(a)+parseInt(n),o=parseInt(o)+parseInt(r);let d=parseInt($(window).width()),s=parseInt($(window).height());for(let c in $(".kams-context-menu").remove(),l='<div class="kams-context-menu"></div>',$("body").append(l),l="<ul>",t){let p=t[c].classname;($(e).hasClass("row-data-file")||$(e).hasClass("row-data-dir")||(""!=clipboardfile.operation||"empty-clipboard"!=p&&"paste"!=p)&&("copy"!=p&&"cut"!=p&&"move"!=p&&"delete"!=p&&"compress"!=p&&"permission"!=p&&"uncheck"!=p||0!=$(".fileid:checked").length)&&($(".fileid:checked").length!=$(".fileid").length||"check"!=p))&&(l+=`
  <li class="file-function file-function-${p}">
    <a href="${t[c].linkurl}">${t[c].caption}</a>
  </li>`)}l+="</ul>",$(".kams-context-menu").html(l),$(".kams-context-menu").css({display:"none",left:a+"px",top:o+"px"});let m=parseInt($(".kams-context-menu").width()),h=parseInt($(".kams-context-menu").height());return m+a+16>=d&&(a-=m,$(".kams-context-menu").css({left:a+"px",top:o+"px"})),h+o+20>=s&&(o=s-parseInt(h)-20,$(".kams-context-menu").css({left:a+"px",top:o+"px"})),$(".kams-context-menu").fadeIn(300),$(document).on("click",function(){$(".kams-context-menu").fadeOut(150,function(){})}),$(document).on("keydown",function(e){e.keyCode&&e.keyCode===$.ui.keyCode.ESCAPE&&$(".kams-context-menu").fadeOut(150,function(){})}),!1})}function setSize(){let e=parseInt($(window).height()),t=parseInt($(window).width()),i=parseInt($(".directory-area").outerWidth())+20;$(".directory-area, .file-area").css("height",e-92+"px"),$(".file-area").css({width:t-i+"px","margin-left":i-14+"px"})}function initContextMenuFileArea(){contextMenu(".file-area",[{caption:"Copy Selected File",linkurl:"javascript:copySelectedFile()",classname:"copy"},{caption:"Cut Selected File",linkurl:"javascript:cutSelectedFile()",classname:"cut"},{caption:"Move Selected File",linkurl:"javascript:moveSelectedFile()",classname:"move"},{caption:"Delete Selected File",linkurl:"javascript:deleteSelectedFile()",classname:"delete"},{caption:"Compress Selected File",linkurl:"javascript:compressSelectedFile()",classname:"compress"},{caption:"Set Permission",linkurl:"javascript:changePermission()",classname:"permission"},{caption:"Paste File",linkurl:"javascript:pasteFile()",classname:"paste"},{caption:"Create New File",linkurl:"javascript:createFile()",classname:"createfile"},{caption:"Create New Directory",linkurl:"javascript:createDirectory()",classname:"createdir"},{caption:"Up Directory",linkurl:"javascript:goToUpDir()",classname:"up"},{caption:"Refresh File List",linkurl:"javascript:refreshList()",classname:"refresh"},{caption:"Change View Type",linkurl:"javascript:thumbnail()",classname:"view"},{caption:"Upload File",linkurl:"javascript:uploadFile()",classname:"upload"},{caption:"Check All",linkurl:"javascript:selectAll(1)",classname:"check"},{caption:"Uncheck All",linkurl:"javascript:selectAll(0)",classname:"uncheck"},{caption:"Empty Clipboard",linkurl:"javascript:emptyClipboard()",classname:"empty-clipboard"}])}function initContextMenuFile(){$(".row-data-file").each(function(e){let t=$(this).attr("data-file-type"),i=$(this).attr("data-file-name"),a=$(this).attr("data-file-location")+"/"+i,o=$(this).attr("data-file-url");if(-1!=t.indexOf("image")||-1!=t.indexOf("shockwave")){let l=$(this).attr("data-image-width"),n=$(this).attr("data-image-height"),r={width:l,height:n};contextMenu(this,contextMenuListFile(t,a,o,r))}else contextMenu(this,contextMenuListFile(t,a,o))})}function initContextMenuDir(){$(".row-data-dir").each(function(e){let t=$(this).attr("data-file-name"),i=$(this).attr("data-file-location")+"/"+t;contextMenu(this,contextMenuListDir(i))})}function createContextMenu(e){return e.map(e=>({caption:e.caption,linkurl:`javascript:${e.action}`,classname:e.classname}))}function contextMenuListFile(e,t,i,a){t=addslashes(t),i=addslashes(i);let o=a?.width?parseInt(a.width):0,l=a?.height?parseInt(a.height):0,n=[{caption:"Select File",action:`selectFile('${i}')`,classname:"select"},{caption:"Copy File",action:`copyFile('${t}')`,classname:"copy"},{caption:"Cut File",action:`cutFile('${t}')`,classname:"cut"},{caption:"Rename File",action:`renameFile('${t}')`,classname:"rename"},{caption:"Move File",action:`moveFile('${t}')`,classname:"move"},{caption:"Delete File",action:`deleteFile('${t}')`,classname:"delete"},{caption:"Compress File",action:`compressFile('${t}')`,classname:"compress"},{caption:"Set Permission",action:`changePermission('${t}')`,classname:"permission"},{caption:"Download File",action:`${i}" target="_blank`,classname:"download"},{caption:"Force Download File",action:`forceDownloadFile('${t}')`,classname:"download"}],r=[];return r=e.startsWith("image")?[{caption:"Preview Image",action:`previewFile('${i}', ${o}, ${l}, false, true)`,classname:"preview"},{caption:"Edit Image",action:`editImage('${t}')`,classname:"edit-image"},{caption:"Image Properties",action:`propertyImage('${t}')`,classname:"property"}]:e.startsWith("video")?[{caption:"Play Video",action:`playVideo('${i}', 'html5')`,classname:"play"},{caption:"Video Properties",action:`propertyVideo('${t}')`,classname:"property"}]:e.startsWith("audio")?[{caption:"Play Audio",action:`playAudio('${i}', 'html5')`,classname:"play"},{caption:"File Properties",action:`propertyFile('${t}')`,classname:"property"}]:e.includes("pdf")?[{caption:"Read PDF Document",action:`previewPDF('${i}')`,classname:"preview"},{caption:"File Properties",action:`propertyFile('${t}')`,classname:"property"}]:e.includes("shockwave")?[{caption:"View Shock Wave",action:`previewSWF('${i}', ${o}, ${l})`,classname:"preview"},{caption:"File Properties",action:`propertyFile('${t}')`,classname:"property"}]:"application/zip"===e?[{caption:"Extract File",action:`extractFile('${t}')`,classname:"extract"},{caption:"File Properties",action:`propertyFile('${t}')`,classname:"property"}]:e.startsWith("text")||e.includes("php")?[{caption:"Edit as Text",action:`editFile('${t}')`,classname:"edit"},{caption:"Edit Code",action:`code-editor.php?filepath=${encodeURIComponent(t)}" target="_blank`,classname:"edit"},{caption:"File Properties",action:`propertyFile('${t}')`,classname:"property"}]:[{caption:"File Properties",action:`propertyFile('${t}')`,classname:"property"}],createContextMenu([...n,...r])}function contextMenuListDir(e){e=addslashes(e);let t=[{caption:"Open Directory",action:`openDir('${e}')`,classname:"open"},{caption:"Copy Directory",action:`copyFile('${e}')`,classname:"copy"},{caption:"Rename Directory",action:`renameFile('${e}', true)`,classname:"rename"},{caption:"Cut Directory",action:`cutFile('${e}')`,classname:"cut"},{caption:"Move Directory",action:`moveFile('${e}', true)`,classname:"move"},{caption:"Delete Directory",action:`deleteDirectory('${e}')`,classname:"delete"},{caption:"Compress Directory",action:`compressFile('${e}')`,classname:"compress"},{caption:"Set Permission",action:`changePermission('${e}')`,classname:"permission"},{caption:"Directory Properties",action:`propertyDir('${e}')`,classname:"property"}];return createContextMenu(t)}let skipondrop=!1;function goToUpDir(){openDir(dirname($("#address").val()))}function forceDownloadFile(e){window.open("tool-download-file.php?filepath="+encodeURIComponent(e))}let thumbnailIndexCur=0,thumbnailIndexNext=0,thumbnailIndexPrev=0;function previewFile(e,t,i,a,o){let l=t,n=i,r="",d=basename(e);arrthumbnail.length&&(-1==(thumbnailIndexCur=$.inArray(e,arrthumbnailURL))?(thumbnailIndexCur=0,thumbnailIndexNext=0,thumbnailIndexPrev=0):0==thumbnailIndexCur?(thumbnailIndexNext=thumbnailIndexCur+1,thumbnailIndexPrev=arrthumbnailURL.length-1):thumbnailIndexCur>=arrthumbnailURL.length?(thumbnailIndexNext=0,thumbnailIndexPrev=arrthumbnailURL.length-1):(thumbnailIndexNext=thumbnailIndexCur+1,thumbnailIndexPrev=thumbnailIndexCur-1),thumbnailIndexNext%=arrthumbnailURL.length,thumbnailIndexPrev%=arrthumbnailURL.length,thumbnailIndexNext<0&&(thumbnailIndexNext=0)),a?r='<img src="'+e+'" width="'+l+'" height="'+n+'" class="image2zoomout" title="'+d+'" onclick="previewFile(\''+e+"', '"+t+"', '"+i+"', false);\" />":(t>500&&(n=i/t*(l=500)),r='<img src="'+e+'" width="'+l+'" height="'+n+'" class="image2zoomin" title="'+d+'" onclick="previewFile(\''+e+"', '"+t+"', '"+i+"', true);\" />");let s={};s.url=arrthumbnail[thumbnailIndexPrev].url,s.width=arrthumbnail[thumbnailIndexPrev].image_width,s.height=arrthumbnail[thumbnailIndexPrev].image_height;let c={};c.url=arrthumbnail[thumbnailIndexNext].url,c.width=arrthumbnail[thumbnailIndexNext].image_width,c.height=arrthumbnail[thumbnailIndexNext].image_height;let p=Math.round(n/2-3),m=l-8,h=p+32,u=m-90,f="",g="",b="";if(f+='<div class="nav-thumb nav-thum-prev" style="top:'+p+'px;left:0px;" onclick="previewFile(\''+s.url+"', "+s.width+", "+s.height+');">&lt;</div>',g+='<div class="nav-thumb nav-thum-next" style="top:'+p+"px;left:"+m+'px;" onclick="previewFile(\''+c.url+"', "+c.width+", "+c.height+');">&gt;</div>',b+='<div class="tool-thumb" style="top:'+h+"px;left:"+u+'px;"><a href="javascript:;" onclick="selectFileIndex(\''+e+'\');" title="Select Image"><img src="style/images/trans16.gif" class="select" border="0"></a> <a href="javascript:;" onclick="window.open(\''+e+'\');" title="Download Image"><img src="style/images/trans16.gif" class="download" border="0"></a> <a href="javascript:;" onclick="editImage(\''+relative2absolute(e)+'\');closeOverlayDialog();" title="Edit Image"><img src="style/images/trans16.gif" class="edit-image" border="0"></a> <a href="javascript:;" onclick="propertyImage(\''+relative2absolute(e)+'\');" title="Image Properties"><img src="style/images/trans16.gif" class="property" border="0"></a> </div>',l>60&&arrthumbnail.length>1&&(r+=f+g+b),o&&togglethumb){let v=$('li[data-file-url="'+e+'"] .thumbimage img'),y=parseFloat(v.offset().left),w=parseFloat(v.offset().top),x=96;n>l&&(y+=(96-(x=96*l/n))/2);let k=96;l>n&&(w+=(96-(k=96*n/l))/2);let C=(parseFloat($(window).width())-l)/2,F=(parseFloat($(window).height())-n)/2,_="url(tool-thumb-image.php?filepath="+encodeURIComponent(relative2absolute(e))+")";$("<img />").addClass("anim-preview").attr("src",e).css({"background-image":_,"background-size":"100%",width:x+"px",height:k+"px",left:y+"px",top:w+"px",position:"absolute","z-index":"5000"}).appendTo("body"),$(".anim-preview").animate({left:C,top:F,width:l,height:n},200,function(){$(".anim-preview").remove(),overlayDialog(r,l,n),$(".image2zoomout, .image2zoomin").on("mouseover",function(){let e=$(this).attr("src");$('li[data-file-url="'+e+'"] .thumbitem').addClass("thumbitem-selected")}),$(".image2zoomout, .image2zoomin").on("mouseout",function(){let e=$(this).attr("src");$('li[data-file-url="'+e+'"] .thumbitem').removeClass("thumbitem-selected")})})}else overlayDialog(r,l,n),$(".image2zoomout, .image2zoomin").on("mouseover",function(){let e=$(this).attr("src");$('li[data-file-url="'+e+'"] .thumbitem').addClass("thumbitem-selected")}),$(".image2zoomout, .image2zoomin").on("mouseout",function(){let e=$(this).attr("src");$('li[data-file-url="'+e+'"] .thumbitem').removeClass("thumbitem-selected")})}function preloadImage(){$(document).on("hover",'.row-data-file[data-file-type*="image"]',function(){let e=$(this).attr("data-file-url"),t=parseInt($(this).attr("data-image-width")),i=parseInt($(this).attr("data-image-height"));new Image(t,i).src=e})}function playVideo(e,t){let i="";overlayDialog(i="iframe"==t?'<iframe frameborder="0" hspace="0" vspace="0" marginheight="0" marginwidth="0" scrolling="auto" src="'+e+'" width="500" height="375" /></ifame>':"html5"==t?'<video src="'+e+'" poster="style/images/movie.png" controls="true" width="500" height="375"><object width="500" height="375" type="application/x-shockwave-flash" data="moxieplayer.swf"><param name="url" value="'+e+'"><param name="src" value="moxieplayer.swf"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="true"><param name="autoplay" value="true"><param name="flashvars" value="url='+e+'&amp;poster=style/images/movie.png&amp;autoplay=true"></object></video>':"moxie"==t?'<object width="500" height="375" type="application/x-shockwave-flash" data="moxieplayer.swf"><param name="url" value="'+e+'"><param name="src" value="moxieplayer.swf"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="true"><param name="autoplay" value="true"><param name="flashvars" value="url='+e+'&amp;poster=style/images/movie.png&amp;autoplay=true"></object>':'<object width="500" height="375" data="'+e+'" type="application/x-mplayer2"><param name="url" value="'+e+'" /></object>',500,375)}function playAudio(e,t){let i="";overlayDialog(i="iframe"==t?'<iframe frameborder="0" hspace="0" vspace="0" marginheight="0" marginwidth="0" scrolling="auto" src="'+e+'" width="320" height="50" /></ifame>':"html5"==t?'<video src="'+e+'" poster="audio.jpg" controls="true" width="320" height="50"><object width="320" height="50" data="'+e+'" type="application/x-mplayer2"><param name="url" value="'+e+'" /></object></video>':"moxie"==t?'<object width="320" height="50" type="application/x-shockwave-flash" data="moxieplayer.swf"><param name="url" value="'+e+'"><param name="src" value="moxieplayer.swf"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="true"><param name="autoplay" value="true"><param name="flashvars" value="url='+e+'&amp;poster=style/images/audio.png&amp;autoplay=true"></object>':'<object width="320" height="50" data="'+e+'" type="application/x-mplayer2"><param name="url" value="'+e+'" /></object>',320,50)}function previewPDF(e){overlayDialog('<embed src="'+e+'#toolbar=0&amp;navpanes=0&amp;scrollbar=0" width="720" height="400">',720,400)}function previewSWF(e,t,i){overlayDialog('<object width="'+t+'" height="'+i+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"><param name="src" value="'+e+'"><embed src="'+e+'" width="'+t+'" height="'+i+'"></embed></object>',t,i)}function propertyFile(e){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"File Properties",width:400,height:270,buttons:{Close:function(){$(this).dialog("destroy")}}}),$.get("tool-property-file.php",{filepath:e},function(t){$("#common-dialog-inner").html(t);"application/zip"==$(".mime-type").attr("data-content")&&($(".ui-dialog-buttonset").prepend('<button aria-disabled="false" role="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" type="button"><span class="ui-button-text">Show Content</span></button>'),$(".ui-dialog-buttonset").find("button:first").attr("onclick","showZipContent('"+e+"')"))})}function propertyImage(e){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Image Properties",width:400,height:410,buttons:{Close:function(){$(this).dialog("destroy")}}}),$.get("tool-property-file.php",{filepath:e,type:"image"},function(e){$("#common-dialog-inner").html(e)})}function propertyVideo(e){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Video Properties",width:400,height:410,buttons:{Close:function(){$(this).dialog("destroy")}}}),$.get("tool-property-file.php",{filepath:e,type:"video"},function(e){$("#common-dialog-inner").html(e)})}function propertyDir(e){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Directory Properties",width:400,height:230,buttons:{Close:function(){$(this).dialog("destroy")}}}),$.get("tool-property-file.php",{filepath:e,type:"directory"},function(e){$("#common-dialog-inner").html(e)})}function showZipContent(e){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Zip Content",width:400,height:230,buttons:{"Extract File":function(){extractFile(e)},Close:function(){$(this).dialog("destroy")}}}),$.get("tool-zip-content.php",{filepath:e},function(e){$("#common-dialog-inner").html(e)})}function renameFile(e,t){if(!e){let i;$(".fileid:checked").each(function(a){void 0==i&&void 0!=(i=$(this).attr("value"))&&(e=i,"true"==$(this).attr("data-isdir")&&(t=!0))})}if(e){$("#common-dialog-inner").html("");let a;a=t?"Rename Directory":"Rename File",$("#common-dialog").dialog({modal:!0,title:a,width:400,height:200,buttons:{OK:function(){let e=$("#fflocation").val(),i=$("#ffoldname").val(),a=$("#ffnewname").val(),o,l;try{o=getfileextension(i.trim())}catch(n){o=getfileextension(i)}try{l=getfileextension(a.trim())}catch(r){l=getfileextension(a)}try{a=a.trim()}catch(d){}if(""==a)jqAlert("Please type new name.","Input Needed"),$("#ffnewname").val(i),$("#ffnewname").select();else if(i==a)jqAlert("New name and old name must be different.","Invalid Name");else{if(o.toString()!=l.toString()&&!t&&!confirm("The new file extension is different with old one.\nIf you change a file name extension, the file might become unusable.\nAre you sure you want to change it?"))return;$.post("tool-file-operation.php?option=renamefile",{location:e,oldname:i,newname:a},function(t){if("SUCCESS"==t){openDir(e);try{$("#common-dialog").dialog("destroy")}catch(i){}}else"EXIST"==t?jqAlert(a+" already exists. Please type another name.","Invalid Name"):"READONLY"==t?jqAlert("The operation was disabled on read-only mode.","Read-Only"):"FORBIDDENEXT"==t&&jqAlert("The operation was aborted because this file name extension is forbidden. Please use another file name extension.","Forbidden Extension")})}},Cancel:function(){$(this).dialog("destroy")}}});let o='<form id="formfilerename" name="form1" method="post" action=""><table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table"><tr><td width="30%">Location</td><td><input type="text" name="fflocation" id="fflocation" class="input-text" autocomplete="off" readonly="readonly" /></td></tr><tr><td>Current Name</td><td><input type="text" name="ffoldname" id="ffoldname" class="input-text" autocomplete="off" readonly="readonly" /></td></tr><tr><td>New Name</td><td><input type="text" name="ffnewname" id="ffnewname" class="input-text" autocomplete="off" /></td></tr></table></form>';$("#common-dialog-inner").html(o),$("#fflocation").val(dirname(e)),$("#ffoldname, #ffnewname").val(basename(e));let l=removefileextension($("#ffnewname").val()),n=0,r=l.length;setInputSelection(document.getElementById("ffnewname"),n,r)}else jqAlert("No file or directory selected.","Invalid Operation")}function compressFile(e){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Compress File",width:400,height:175,buttons:{OK:function(){$(".ui-dialog-buttonpane").append('<div class="wait-status">Plase wait...</div>'),$(".ui-dialog-buttonset button:first").attr("disabled","disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","true");let t=$("#ffsourcepath").val(),i=$("#fftargetpath").val();$.post("tool-file-operation.php?option=compressfile",{"sourcepath[]":t,targetpath:i},function(t){if("CONFLICT"==t)jqAlert(e+" already exists. Please enter another name.","Invalid Name");else if("SUCCESS"==t){openDir(dirname(i));try{$("#common-dialog").dialog("destroy")}catch(a){}}else"FAILED"==t?jqAlert("The operation was failed.","Unknown Error Occured"):"NOTSUPPORTED"==t?jqAlert("The operation was failed.","ZipArchive class not exists. Please verify that php_zip extension is available on this server."):"READONLY"==t&&jqAlert("The operation was disabled on read-only mode.","Read-Only");$(".ui-dialog-buttonpane").find(".wait-status").remove(),$(".ui-dialog-buttonset button:first").removeAttr("disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","false")})},Cancel:function(){$(this).dialog("destroy")}}});let t='<form id="formfilerename" name="form1" method="post" action=""><table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table"><tr><td width="30%">Source Name</td><td><input type="text" name="ffsourcepath" id="ffsourcepath" class="input-text" autocomplete="off" readonly="readonly" /></td></tr><tr><td>Target Name</td><td><input type="text" name="fftargetpath" id="fftargetpath" class="input-text" autocomplete="off" /></td></tr></table></form>';$("#common-dialog-inner").html(t),$("#ffsourcepath").val(e),$("#fftargetpath").val(removefileextension(e)+".zip");let i=dirname($("#fftargetpath").val()).length+1,a=removefileextension(basename($("#fftargetpath").val())),o=i+a.length;setInputSelection(document.getElementById("fftargetpath"),i,o)}function compressSelectedFile(){let e=$("#address").val(),t="",i=0,a="";if($(".fileid:checked").each(function(e){t+="<div>"+$(this).val()+"</div>",i++}),i){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Compress File",width:400,height:260,buttons:{OK:function(){$(".ui-dialog-buttonpane").append('<div class="wait-status">Plase wait...</div>'),$(".ui-dialog-buttonset button:first").attr("disabled","disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","true");let e=$("#fftargetpath").val(),t="targetpath="+encodeURIComponent(e);$(".fileid:checked").each(function(e){t+="&sourcepath[]="+encodeURIComponent($(this).val())}),$.post("tool-file-operation.php?option=compressfile",{postdata:t},function(t){if("SUCCESS"==t||"EXIST"==t){openDir(dirname(e));try{$("#common-dialog").dialog("destroy")}catch(i){}}if("CONFLICT"==t)jqAlert("Please enter another name.","Invalid Name");else if("SUCCESS"==t){openDir(dirname(tf));try{$("#common-dialog").dialog("destroy")}catch(a){}}else"FAILED"==t?jqAlert("The operation was failed.","Unknown Error Occured"):"NOTSUPPORTED"==t?jqAlert("The operation was failed.","ZipArchive class not exists. Please verify that php_zip extension is available on this server."):"READONLY"==t&&jqAlert("The operation was disabled on read-only mode.","Read-Only");$(".ui-dialog-buttonpane").find(".wait-status").remove(),$(".ui-dialog-buttonset button:first").removeAttr("disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","false")})},Cancel:function(){$(this).dialog("destroy")}}}),a='<table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table"><tr><td width="30%">Target Name</td><td><input type="text" name="fftargetpath" id="fftargetpath" class="input-text" autocomplete="off" /></td></tr></table><div></div><div>File to be compressed:</div><div class="seleted-file-list">'+t+"</div></div>",$("#common-dialog-inner").html(a);let o="new-compressed",l=1,n,r=1,d=1;do r=$('.file-area .row-data-dir[data-file-name="'+(n=l>1?o+"-"+l+".zip":o+".zip")+'"]').length,d=$('.file-area .row-data-file[data-file-name="'+n+'"]').length,l++;while(r||d);$("#fftargetpath").val(e+"/"+n);let s=(n=dirname($("#fftargetpath").val())).length+1,c=removefileextension(basename($("#fftargetpath").val())),p=s+c.length;setInputSelection(document.getElementById("fftargetpath"),s,p)}else jqAlert("No file selected.","Invalid Operation")}function moveSelectedFile(){let e=$("#address").val(),t="",i=0,a="";$(".fileid:checked").each(function(e){t+="<div>"+$(this).val()+"</div>",i++}),i?($("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Move File",width:400,height:260,buttons:{OK:function(){let t=$("#fftargetdir").val();if(e!=t){let i="targetdir="+encodeURIComponent(t);$(".fileid:checked").each(function(e){i+="&file[]="+encodeURIComponent($(this).val())});let a="?option=copyfile&deletesource=1";$.post("tool-file-operation.php"+a,{postdata:i},function(e){if("SUCCESS"==e||"EXIST"==e){openDir($("#fftargetdir").val());try{$("#common-dialog").dialog("destroy")}catch(t){}}else"READONLY"==e&&jqAlert("The operation was disabled on read-only mode.","Read-Only");$(".ui-dialog-buttonpane").find(".wait-status").remove(),$(".ui-dialog-buttonset button:first").removeAttr("disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","false")})}else jqAlert("Please enter another name.","Invalid Name")},Cancel:function(){$(this).dialog("destroy")}}}),a='<table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table"><tr><td width="30%">New Location</td><td><input type="text" name="fftargetdir" id="fftargetdir" class="input-text" autocomplete="off" /></td></tr></table><div></div><div>File to be moved:</div><div class="seleted-file-list">'+t+"</div></div>",$("#common-dialog-inner").html(a),$("#fftargetdir").focus(),$("#fftargetdir").val(e)):jqAlert("No file selected.","Invalid Operation")}function extractFile(e){if(!e){let t=$(".fileid:checked[data-iszip=true]").attr("value");if(void 0!=t)e=t;else{jqAlert("No file selected.","Invalid Operation");return}}$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Extract File",width:400,height:175,buttons:{OK:function(){$(".ui-dialog-buttonpane").append('<div class="wait-status">Plase wait...</div>'),$(".ui-dialog-buttonset button:first").attr("disabled","disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","true");let e=$("#ffsourcename").val(),t=$("#fftargetdir").val();$.post("tool-file-operation.php?option=extractfile",{filepath:e,targetdir:t},function(e){if("SUCCESS"==e){openDir(t);try{$("#common-dialog").dialog("destroy")}catch(i){}}else"FAILED"==e?jqAlert("This is not a Zip file.","Invalid Format"):"NOTSUPPORTED"==e?jqAlert("The operation was failed.","ZipArchive class not exists. Please verify that php_zip extension is available on this server."):"READONLY"==e&&jqAlert("The operation was disabled on read-only mode.","Read-Only")})},Cancel:function(){$(this).dialog("destroy")}}});let i='<form id="formfilerename" name="form1" method="post" action=""><table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table"><tr><td width="30%">Source Name</td><td><input type="text" name="ffsourcename" id="ffsourcename" class="input-text" autocomplete="off" readonly="readonly" /></td></tr><tr><td>Target Location</td><td><input type="text" name="fftargetdir" id="fftargetdir" class="input-text" autocomplete="off" /></td></tr></table></form>';$("#common-dialog-inner").html(i),$("#ffsourcename").val(e),$("#fftargetdir").val(dirname(e))}function createFile(){let e=$("#address").val();$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Create New File",width:400,height:200,buttons:{OK:function(){let e=$("#fflocation").val(),t=$("#ffname").val();$.post("tool-file-operation.php?option=createfile",{location:e,name:t},function(i){if("EXIST"==i)jqAlert(e+"/"+t+" already exists. Please type another name."),$("#ffname").select();else if("SUCCESS"==i){openDir(e);try{$("#common-dialog").dialog("destroy")}catch(a){}}else"FORBIDDENEXT"==i?jqAlert("Creating file was aborted because this file name extension is forbidden. Please use another file name extension.","Forbidden Extension"):"READONLY"==i&&jqAlert("The operation was disabled on read-only mode.","Read-Only")})},Cancel:function(){$(this).dialog("destroy")}}});let t='<form id="formfilecreate" name="form1" method="post" action=""><table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table"><tr><td width="30%">Location</td><td><input type="text" name="fflocation" id="fflocation" class="input-text" autocomplete="off" readonly="readonly" /></td></tr><tr><td>Directory Name</td><td><input type="text" name="ffname" id="ffname" class="input-text" autocomplete="off" /></td></tr></table></form>';$("#common-dialog-inner").html(t),$("#fflocation").val(e);let i="new-file",a=1,o=1,l=1;do o=$('.file-area .row-data-dir[data-file-name="'+(e=a>1?i+"-"+a+".txt":i+".txt")+'"]').length,l=$('.file-area .row-data-file[data-file-name="'+e+'"]').length,a++;while(o||l);$("#ffname").val(e);let n=removefileextension(e),r=0,d=n.length;setInputSelection(document.getElementById("ffname"),r,d)}function createDirectory(){let e=$("#address").val();$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Create Directory",width:400,height:200,buttons:{OK:function(){let e=$("#fflocation").val(),t=$("#ffname").val();$.post("tool-file-operation.php?option=createdir",{location:e,name:t},function(i){if("EXIST"==i)jqAlert(e+"/"+t+" already exists. Please type another name."),$("#ffname").select();else if("SUCCESS"==i){openDir(e);try{$("#common-dialog").dialog("destroy")}catch(a){}}else"READONLY"==i&&jqAlert("The operation was disabled on read-only mode.","Read-Only")})},Cancel:function(){$(this).dialog("destroy")}}});let t='<form id="formfilerename" name="form1" method="post" action=""><table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table"><tr><td width="30%">Location</td><td><input type="text" name="fflocation" id="fflocation" class="input-text" autocomplete="off" readonly="readonly" /></td></tr><tr><td>Directory Name</td><td><input type="text" name="ffname" id="ffname" class="input-text" autocomplete="off" /></td></tr></table></form>';$("#common-dialog-inner").html(t),$("#fflocation").val(e);let i="new-directory",a=1,o=1,l=1;do o=$('.file-area .row-data-dir[data-file-name="'+(e=a>1?i+"-"+a:i)+'"]').length,l=$('.file-area .row-data-file[data-file-name="'+e+'"]').length,a++;while(o||l);$("#ffname").val(e),$("#ffname").select()}function moveFile(e,t){$("#common-dialog-inner").html("");let i;i=t?"Move Directory":"Move File",$("#common-dialog").dialog({modal:!0,title:i,width:400,height:190,buttons:{OK:function(){$(".ui-dialog-buttonpane").append('<div class="wait-status">Plase wait...</div>'),$(".ui-dialog-buttonset button:first").attr("disabled","disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","true");let e=$("#address").val(),t=$("#ffnewlocation").val(),i=$("#ffcurrentlocation").val(),a="targetdir="+encodeURIComponent(t);a+="&file[]="+encodeURIComponent(i+"/"+$("#ffpath").val());let o="?option=copyfile&deletesource=1";$.post("tool-file-operation.php"+o,{postdata:a},function(t){if("SUCCESS"==t||"EXIST"==t){openDir(e);try{$("#common-dialog").dialog("destroy")}catch(i){}}else"READONLY"==t&&jqAlert("The operation was disabled on read-only mode.","Read-Only");$(".ui-dialog-buttonpane").find(".wait-status").remove(),$(".ui-dialog-buttonset button:first").removeAttr("disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","false")})},Cancel:function(){$(this).dialog("destroy")}}});let a='<form id="formfilemove" name="form1" method="post" action=""><table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table"><tr><td width="30%">Base Name</td><td><input type="text" name="ffpath" id="ffpath" class="input-text" autocomplete="off" readonly="readonly" /></td></tr><tr><td>Current Location</td><td><input type="text" name="ffcurrentlocation" id="ffcurrentlocation" class="input-text" autocomplete="off" readonly="readonly" /></td></tr><tr><td>New location</td><td><input type="text" name="ffnewlocation" id="ffnewlocation" class="input-text" autocomplete="off" /></td></tr></table></form>';$("#common-dialog-inner").html(a),$("#ffpath").val(basename(e)),$("#ffcurrentlocation").val(dirname(e)),$("#ffnewlocation").focus(),$("#ffnewlocation").val(dirname(e))}function uploadFile(){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Upload File",width:600,height:410,buttons:{Close:function(){$(this).dialog("destroy")}}});let e=$("#address").val(),t='<div id="imageuploader"><form method="post" enctype="multipart/form-data" action="tool-upload-file.php?iframe=1" target="formdumper"><input type="hidden" name="targetdir" id="targetdir" value="">File <input type="file" name="file" id="images" /><input type="submit" class="upload-button" value="Upload Files" style="display:none" /> &nbsp; <span id="image-settings-controller"></span></form><div id="response"></div><ul id="image-list"></ul></div><iframe style="display:none; width:0px; height:0px;" id="formdumper" name="formdumper"></iframe></div>';$("#common-dialog-inner").html(t),$.get("tool-upload-file-settings.php",{"show-control":"1"},function(e){$("#image-settings-controller").html(e)}),$("#targetdir").val(e),$.ajax({type:"GET",url:"js/upload.js",dataType:"script"})}function saveFile(e,t,i){""==e?jqAlert("Please enter a valid file name.","Invalid File Name"):($(".ui-dialog-buttonpane").append('<div class="wait-status">Plase wait...</div>'),$(".ui-dialog-buttonset button:first").attr("disabled","disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","true"),$.post("tool-edit-file.php?option=savefile",{filepath:e,filecontent:t},function(e){"READONLY"==e?jqAlert("The operation was disabled on read-only mode.","Read-Only"):"READONLYFILE"==e?jqAlert("Saving was aborted because this file is read-only. You should to change permission of this file first.","Read-Only"):"ISDIR"==e?jqAlert("Saving was aborted because this file name is similiar to a directory name. You should to change file name first.","Invalid File Name"):"FORBIDDENEXT"==e?jqAlert("Saving was aborted because this file name extension is forbidden. Please use another file name extension to save it.","Forbidden Extension"):"NOTMODIFIED"==e?jqAlert("Content is not modified.","Not Modified"):("function"==typeof i&&i(),openDir()),$(".ui-dialog-buttonpane").find(".wait-status").remove(),$(".ui-dialog-buttonset button:first").removeAttr("disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","false")}))}function setActiveCompress(e){let t=e?1:0;$.post("tool-upload-file-settings.php",{"change-state":"change-state",state:t},function(e){})}function uploadFileSettings(){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Upload File Settings",width:420,height:270,buttons:{Save:function(){let e=$("#uploadsetting").serialize();$.post("tool-upload-file-settings.php",{save:"save",data:e},function(e){}),$(this).dialog("close")},Cancel:function(){$(this).dialog("destroy")}}}),$.get("tool-upload-file-settings.php",{"show-form":"1"},function(e){$("#common-dialog-inner").html(e)})}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};let cnt1="",cnt2="";function openFile(e){cnt2=$("#filecontent").val();let t=!0;cnt1!=cnt2&&(t=confirm("Are you sure you want to reopen file without save change?")),t&&editFile(e)}function editFile(e){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Edit Text File",closeOnEscape:!1,resizable:!0,width:600,height:410,buttons:{Save:function(){saveFile($("#filepath").val(),$("#filecontent").val()),cnt1=$("#filecontent").val()},"Save and Close":function(){saveFile($("#filepath").val(),$("#filecontent").val(),function(){$("#common-dialog").dialog("destroy")})},"Close without Save":function(){cnt2=$("#filecontent").val(),cnt1!=cnt2?confirm("Are you sure you want to close without save?")&&$(this).dialog("destroy"):$(this).dialog("destroy")}},resize:function(e,t){$("#filecontent").css({height:t.size.height-158+"px"})}}),$(".ui-dialog-titlebar-close").remove(),$.get("tool-edit-file.php",{option:"openfile",filepath:e},function(e){$("#common-dialog-inner").html(e),cnt1=$("#filecontent").val()})}function deleteFile(e){let t=dirname(e);$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Delete File",width:400,height:175,buttons:{OK:function(){let i="";i="file[]="+e,$.post("tool-file-operation.php?option=deletefile",{postdata:i},function(e){if("SUCCESS"==e){openDir(t);try{$("#common-dialog").dialog("destroy")}catch(i){}}else"READONLY"==e&&jqAlert("The operation was disabled on read-only mode.","Read-Only")})},Cancel:function(){$(this).dialog("destroy")}}});let i="<div>Are you sure to delete this file:<br />"+e+"</div>";$("#common-dialog-inner").html(i),$(".ui-dialog-buttonset button:last").focus()}function deleteDirectory(e){let t=$("#address").val();$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Delete Directory",width:400,height:175,buttons:{OK:function(){let i="";i="file[]="+e,$.post("tool-file-operation.php?option=deletefile",{postdata:i},function(e){if("SUCCESS"==e){openDir(t);try{$("#common-dialog").dialog("destroy")}catch(i){}}else"READONLY"==e&&jqAlert("The operation was disabled on read-only mode.","Read-Only")})},Cancel:function(){$(this).dialog("destroy")}}});let i="<div>Are you sure to delete this directory including its content:<br />"+e+"</div>";$("#common-dialog-inner").html(i),$(".ui-dialog-buttonset button:last").focus()}function deleteSelectedFile(){let e=$("#address").val(),t="",i="",a=0,o="";$(".fileid:checked").each(function(e){i+="<div>"+$(this).val()+"</div>",t+="&file[]="+encodeURIComponent($(this).val()),a++}),a?($("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Delete File",width:400,height:250,buttons:{OK:function(){$.post("tool-file-operation.php?option=deletefile",{postdata:t},function(t){if("SUCCESS"==t){openDir(e);try{$("#common-dialog").dialog("destroy")}catch(i){}}else"READONLY"==t&&jqAlert("The operation was disabled on read-only mode.","Read-Only")})},Cancel:function(){$(this).dialog("destroy")}}}),o='<div>Are you sure to delete file/s:</div><div class="seleted-file-list">'+i+"</div></div>",$("#common-dialog-inner").html(o),$(".ui-dialog-buttonset button:last").focus()):jqAlert("No file selected.","Invalid Operation")}function selectAll(e){if(e){let t=$(".fileid").length,i;for(i=0;i<t;i++)$(".fileid")[i].checked=!0;try{$("#control-fileid")[0].checked=!0}catch(a){}}else{let o=$(".fileid").length,l;for(l=0;l<o;l++)$(".fileid")[l].checked=!1;try{$("#control-fileid")[0].checked=!1}catch(n){}}updateToolbarStatus()}let togglethumb=!1;function thumbnail(){let e=$("#address").val();(togglethumb=!togglethumb)?$("#tb-thumbnail").addClass("tb-selected"):$("#tb-thumbnail").removeClass("tb-selected");let t=[];$(".fileid:checked").each(function(e){t[t.length]=$(this).val()});cookieWrite("togglethumb",togglethumb?1:0,24),openDir(e,t)}function refreshList(){let e=$("#address").val(),t=[];$(".fileid:checked").each(function(e){t[t.length]=$(this).val()}),openDir(e,t)}let clipboardfile={operation:"",content:[]};function transferFile(){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Transfer File",width:400,height:240,buttons:{"Get File":function(){let e=$("#source").val(),t=$("#target").val(),i=$("#filename").val();$.post("tool-file-operation.php?option=transferfile",{source:e,location:t,name:i},function(e){if("READONLY"==e)jqAlert("The operation was disabled on read-only mode.","Read-Only");else if("FAILED"==e)jqAlert("Transfer file failed.","Failed");else{try{$("#common-dialog").dialog("destroy")}catch(i){}openDir(t)}})},Cancle:function(){try{$("#common-dialog").dialog("destroy")}catch(e){}}}});let e='<form name="form1" method="post" action=""><table width="100%" border="0" cellspacing="0" cellpadding="0" class="dialog-table"><tr><td width="30%">URL</td><td><input type="text" name="source" class="input-text input-text-long" id="source" data-needed="true" autocomplete="off" /></td></tr><tr><td>Target Location</td><td><input type="text" name="target" class="input-text input-text-long" id="target" data-needed="true" autocomplete="off" /></td></tr><td>File Name</td><td><input type="text" name="filename" class="input-text input-text-long" id="filename" data-needed="true" autocomplete="off" /></td></tr></table></form>';$("#common-dialog-inner").html(e);let t=$("#address").val();$("#target").val(t),$("#source").on("change",function(){let e=$(this).val(),t;t=0==e.indexOf("data:")?dataToFileName(e):filterFileName(basename($(this).val())),$("#filename").val(t)}),$("#source").on("keyup",function(){let e=$(this).val(),t;t=0==e.indexOf("data:")?dataToFileName(e):filterFileName(basename($(this).val())),$("#filename").val(t)})}function dataToFileName(e){return e.split(",")[0].split(":")[1].split(";")[0].split("/").join(".")}function filterFileName(e){return e.replace(/[^A-Za-z\.\-\d_\/]/g,"")}function copySelectedFile(){this.operation="copy",this.content=[];let e=this,t=0;$(".fileid:checked").each(function(i){e.content[e.content.length]=$(this).val(),t++}),clipboardfile=e,0==t?jqAlert("No file selected.","Invalid Operation"):($("#tb-clipboard").removeClass("tb-hide"),$("#tb-clipboard-empty").removeClass("tb-hide")),updateToolbarStatus()}function cutSelectedFile(){this.operation="cut",this.content=[];let e=this,t=0;$(".fileid:checked").each(function(i){e.content[e.content.length]=$(this).val(),t++}),clipboardfile=e,0==t?jqAlert("No file selected.","Invalid Operation"):($("#tb-clipboard").removeClass("tb-hide"),$("#tb-clipboard-empty").removeClass("tb-hide")),updateToolbarStatus()}function cutFile(e){if(e){this.operation="cut",this.content=[];let t=this;t.content[t.content.length]=e,clipboardfile=t,$("#tb-clipboard").removeClass("tb-hide"),$("#tb-clipboard-empty").removeClass("tb-hide"),updateToolbarStatus()}else jqAlert("No file selected.","Invalid Operation")}function copyFile(e){if(e){this.operation="copy",this.content=[];let t=this;t.content[t.content.length]=e,clipboardfile=t,$("#tb-clipboard").removeClass("tb-hide"),$("#tb-clipboard-empty").removeClass("tb-hide"),updateToolbarStatus()}else jqAlert("No file selected.","Invalid Operation")}function pasteFile(){let e=0,t=$("#address").val();if(clipboardfile.content.length){let i="targetdir="+encodeURIComponent(t);for(e in clipboardfile.content)i+="&file[]="+encodeURIComponent(clipboardfile.content[e]);let a="?option=copyfile";"cut"==clipboardfile.operation&&(a+="&deletesource=1"),$.post("tool-file-operation.php"+a,{postdata:i},function(e){"SUCCESS"==e||"EXIST"==e?(openDir(t),"cut"==clipboardfile.operation&&emptyClipboard()):"READONLY"==e&&jqAlert("The operation was disabled on read-only mode.","Read-Only")})}else jqAlert("The clipboard is empty.","Invalid Operation");updateToolbarStatus()}function emptyClipboard(){clipboardfile.content=[],clipboardfile.operation="",$("#tb-clipboard").addClass("tb-hide"),$("#tb-clipboard-empty").addClass("tb-hide"),updateToolbarStatus()}function showClipboard(){$("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Clipboard Content",width:400,height:230,buttons:{Close:function(){$(this).dialog("destroy")}}});let e="<div>File Operation: &quot;"+clipboardfile.operation+"&quot;; Number of File: "+clipboardfile.content.length+'</div><div class="seleted-file-list">'+clipboardfile.content.join("<br />")+"</div>";$("#common-dialog-inner").html(e)}function changePermission(filepath){let data=[];filepath?data=[filepath]:$(".fileid:checked").each(function(e,t){data.push($(this).val())}),1==data.length&&(filepath=data[0]),initPermissionControl(),$("#common-dialog-inner").html('<table width="100%" border="0" cellspacing="1" cellpadding="2" class="row-table file-table permission-table"><thead>  <tr>    <td>User</td>    <td width="25%">Read</td>    <td width="25%">Write</td>    <td width="25%">Execute</td>  </tr></thead><tbody>  <tr>    <td>Owner</td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="user_read" checked="checked"> Allowed</label></td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="user_write"> Allowed</label></td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="user_execute" checked="checked"> Allowed</label></td>  </tr>  <tr>    <td>Group</td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="group_read" checked="checked"> Allowed</label></td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="group_write"> Allowed</label></td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="group_execute" checked="checked"> Allowed</label></td>  </tr>  <tr>    <td>World</td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="world_read" checked="checked"> Allowed</label></td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="world_write"> Allowed</label></td>    <td><label><input type="checkbox" class="perm-checkbox" value="1" name="world_execute" checked="checked"> Allowed</label></td>  </tr>  <tr>    <td>Permission</td>    <td colspan="3"><input type="text" id="file-permission" name="file-permission" class="input-text input-text-medium" value="0555" readonly="readonly"> <span id="recursive-control"><label><input type="checkbox" class="recursive" value="1" name="recursive"> Recursive to contents</label><span></td>    </tr></tbody></table>'),$("#common-dialog").dialog({modal:!0,title:"Set Permission",width:400,height:250,buttons:{Change:function(){if(0==data.length)jqAlert("No file selected.","Invalid Operation");else{$(".ui-dialog-buttonpane").append('<div class="wait-status">Plase wait...</div>'),$(".ui-dialog-buttonset button:first").attr("disabled","disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","true");let e=$("#recursive:checked").val(),t=$("#file-permission").val();$.post("tool-file-operation.php?option=change-perms",{recursive:e,perms:t,data:data},function(e){if("SUCCESS"==e){try{$("#common-dialog").dialog("destroy")}catch(t){}openDir()}else"READONLY"==e&&jqAlert("The operation was disabled on read-only mode.","Read-Only");$(".ui-dialog-buttonpane").find(".wait-status").remove(),$(".ui-dialog-buttonset button:first").removeAttr("disabled"),$(".ui-dialog-buttonset button:first").attr("aria-disabled","false")})}},Close:function(){$(this).dialog("destroy")}}}),filepath?$.get("tool-file-operation.php",{option:"get-perms",filepath:filepath},function(answer){let obj=eval(answer)[0],i;for(i in obj)-1!=i.indexOf("_")?"1"==obj[i]?$('input[name="'+i+'"]').attr("checked","checked"):$('input[name="'+i+'"]').removeAttr("checked"):-1!=i.indexOf("-")&&$('input[name="'+i+'"]').val(obj[i]),"file"==obj.filetype&&$("#recursive-control").remove()}):0==$(".fileid[data-isdir=true]:checked").length&&$("#recursive-control").remove()}function initPermissionControl(){$(document).on("change",".perm-checkbox",function(){let e=$(".perm-checkbox[name=user_read]:checked").length?1:0,t=$(".perm-checkbox[name=user_write]:checked").length?1:0,i=$(".perm-checkbox[name=user_execute]:checked").length?1:0,a=$(".perm-checkbox[name=group_read]:checked").length?1:0,o=$(".perm-checkbox[name=group_write]:checked").length?1:0,l=$(".perm-checkbox[name=group_execute]:checked").length?1:0,n=$(".perm-checkbox[name=world_read]:checked").length?1:0,r=$(".perm-checkbox[name=world_write]:checked").length?1:0,d=$(".perm-checkbox[name=world_execute]:checked").length?1:0,s="0"+(4*e+2*t+i)+(4*a+2*o+l)+(4*n+2*r+d);$("#file-permission").val(s)})}function editImage(e){let t=$(window).width(),i=$(window).height(),a='<div id="image-editor-layer"></div>';$("#all").append(a),$("#image-editor-layer").css({width:"0px",height:"0px"}),$.get("tool-image-editor-form.php",{filepath:e},function(e){$("#image-editor-layer").html(e);let a=i-73;$(".image-editor-sidebar-inner, .image-editor-mainbar-inner").css("height",a+"px");let o={to:{width:t,height:i}};$("#image-editor-layer").show("size",o,500,callbackShowImageEditor),initImageEditorForm()})}function initImageEditorForm(){$(".new-dimension input[type=checkbox]").each(function(e){$(this).css({border:"none",padding:"0"})}),setSizeImageEditor(),filepath=$("#curfilepath").val(),fileurl=$("#curfileurl").val();let e=parseInt($("#curwidth").val()),t=parseInt($("#curheight").val());imgwidth=e,imgheight=t,angle=0,fliph=0,flipv=0,$(document).on("change","#newwidth",function(){if($("#aspectratio:checked").val()){let i=1;i=angle%180==0?t/e:e/t;let a=parseInt($(this).val()),o=parseInt(i*a);$("#newheight").val(o)}$("#image2edit").css({width:$("#newwidth").val()+"px",height:$("#newheight").val()+"px"}),imgwidth=$("#newwidth").val(),imgheight=$("#newheight").val(),previewImageEdit()}),$(document).on("change","#newheight",function(){if($("#aspectratio:checked").val()){let i=1;i=angle%180==0?e/t:t/e;let a=parseInt($(this).val()),o=parseInt(i*a);$("#newwidth").val(o)}$("#image2edit").css({width:$("#newwidth").val()+"px",height:$("#newheight").val()+"px"}),imgwidth=$("#newwidth").val(),imgheight=$("#newheight").val(),previewImageEdit()}),$(document).on("click","#cropimage",function(){crop=$(this).attr("checked")?1:0,previewImageEdit()}),$(window).resize(function(){setSizeImageEditor()})}function setSizeImageEditor(){let e=parseInt($(window).height()),t=parseInt($(window).width()),i=e-73,a=t-200;$(".image-editor-sidebar-inner, .image-editor-mainbar-inner").css("height",i+"px"),$("#image-editor-layer").css("height",e+"px"),$("#curfilepath").css("width",a+"px")}function callbackShowImageEditor(){$("#wrapper").css("display","none"),$("#image-editor-layer").css("position","static"),$("#image-editor-layer").css("width","100%")}function callbackDestroyImageEditor(){$("#image-editor-layer").remove()}function destroyImageEditor(){$("#wrapper").css("display","block"),$("#image-editor-layer").css("top",0),$("#image-editor-layer").css("left",0),$("#image-editor-layer").css("position","absolute");let e={to:{width:0,height:0}};$("#image-editor-layer").hide("size",e,500,function(){$("#image-editor-layer").remove()})}function previewImageEdit(){let e=1e3*Math.random(),t='<img src="tool-image-editor-thumbnail.php?filepath='+encodeURIComponent(filepath)+"&flipv="+flipv+"&fliph="+fliph+"&angle="+angle+"&width="+imgwidth+"&height="+imgheight+"&crop="+crop+"&rand="+e+'" >';$("#image-content").html(t)}function saveImage(){if(confirm("Are you sure to save this state and replace current file?")){filepath=$("#curfilepath").val();let e="option=save2file&filepath="+encodeURIComponent(filepath)+"&flipv="+flipv+"&fliph="+fliph+"&angle="+angle+"&width="+imgwidth+"&height="+imgheight+"&crop="+crop;$.post("tool-image-editor-thumbnail.php",{postdata:e},function(e){"SUCCESS"==e?$.get("tool-image-editor-form.php",{filepath:filepath},function(e){$("#image-editor-layer").html(e),initImageEditorForm()}):"READONLY"==e&&jqAlert("The operation was disabled on read-only mode.","Read-Only")})}}function rotateCW(){for(angle-=90;angle<0;)angle+=360;angle%=360,imgwidth=$("#newwidth").val(),imgheight=$("#newheight").val();let e=imgwidth;imgwidth=imgheight,imgheight=e,$("#newwidth").val(imgwidth),$("#newheight").val(imgheight),previewImageEdit()}function rotateCCW(){for(angle+=90;angle>360;)angle-=360;angle%=360,imgwidth=$("#newwidth").val(),imgheight=$("#newheight").val();let e=imgwidth;imgwidth=imgheight,imgheight=e,$("#newwidth").val(imgwidth),$("#newheight").val(imgheight),previewImageEdit()}function flipV(){flipv++,flipv%=2,previewImageEdit()}function flipH(){fliph++,fliph%=2,previewImageEdit()}function resizeImage(){resize++,(resize%=2)?$(".image-tool-resize-dimension").slideDown(400):$(".image-tool-resize-dimension").slideUp(400)}function about(){overlayDialog('<table width="100%" border="0" cellpadding="0" cellspacing="0" class="dialog-table dialog-about"><tr><td width="40%">Module Name</td><td>Planetbiru File Manager</td></tr><tr><td>Version</td><td>2.2</td></tr><tr><td>Developer</td><td><a href="http://www.kamshory.com" target="_blank">Kamshory Developer</a></td></tr><tr><td>Release Date</td><td>2012-10-20</td></tr><tr><td>Price</td><td>30 USD</td></tr><tr><td>Sponsored Link</td><td><a href="http://www.planetbiru.com" target="_blank">Planetbiru</a></td></tr><tr><td>Information</td><td><a href="javascript:;" onclick="return showInformation();">Click Here</a></td></tr></table>',320,140),$(".dialog-about a").css({"text-decoration":"none"}),fixOverlayDialogToInner(".dialog-about")}function preventSelect(e){skipondrop=!0}function initDropable(){$(".file-list .row-data-dir").draggable({drag:function(){preventSelect($(this).attr("data-file-url")),$(this).css({"z-index":400,opacity:.8})}}),$(".file-list .row-data-file").draggable({drag:function(){preventSelect($(this).attr("data-file-url")),$(this).css({"z-index":400,opacity:.8})}}),$(".file-list .row-data-dir").droppable({activeClass:"directory-drop-active",hoverClass:"directory-drop-hover",drop:function(e,t){let i=t.draggable.attr("data-file-location")+"/"+t.draggable.attr("data-file-name"),a=$(this).attr("data-file-location")+"/"+$(this).attr("data-file-name"),o="targetdir="+encodeURIComponent(a);o+="&file[]="+encodeURIComponent(i);let l="?option=copyfile&deletesource=1";return $.post("tool-file-operation.php"+l,{postdata:o},function(e){"SUCCESS"==e||"EXIST"==e?openDir():"READONLY"==e&&jqAlert("The operation was disabled on read-only mode.","Read-Only")}),skipondrop=!0,t.draggable.hide("scale",{percent:0},300,function(){t.draggable.css("display","none"),openDir()}),!1}})}function loadAnimationStart(){$("#anim-loader").addClass("anim-active")}function loadAnimationStop(){$("#anim-loader").removeClass("anim-active")}function openDirSearch(e){openDir(e),$("#common-dialog").dialog("destroy")}function selectFileSeach(e){selectFile(e),$("#common-dialog").dialog("destroy")}function openDirTree(){let e=$("#address").val().split("/"),t,i="base",a="",o,l=[];for(t in e)if(l.push(e[t]),o=$('a[onclick~="'+(a=l.join("/"))+'"]').parent(),"base"!=a){if(!$("#directory-container").find('a[onclick~="'+a+'"]').length){let n='<ul><li class="row-data-dir dir-control" data-file-path="'+a+'" data-file-name="'+e[t]+'" data-file-location="'+i+'"><a href="javascript:;" onclick="return openDir(\''+a+"')\">"+e[t]+"</a></li></ul>";$("#directory-container").find('[data-file-path="'+i+'"]').append(n)}i=a}return openDir(),!1}function openDir(filepath,selfile,sortby,sortorder){if(!skipondrop){loadAnimationStart();let ret=!0;if(filepath)try{filepath=filepath.trim("/")}catch(e){}else filepath=$("#address").val(),ret=!1;$("#address").val(filepath);let arg={};arg=togglethumb?{dir:filepath,thumbnail:1}:{dir:filepath},sortby&&(arg.sortby=sortby),sortorder&&(arg.sortorder=sortorder),$.get("tool-load-file-json.php",arg,function(answer){if(arrthumbnail=eval(answer),arrthumbnailURL=[],arrthumbnail.length){let xx=0;for(xx in arrthumbnail)arrthumbnailURL[xx]=arrthumbnail[xx].url}}),$.get("tool-load-file.php",arg,function(e){$("#file-container").html(e);try{if(selfile.length){let t="";$(".fileid").each(function(e){t=$(this).val(),-1!=$.inArray(t,selfile)&&$(this).attr("checked","checked")})}if($(".fileid:checked").length==$(".fileid").length&&$(".fileid").length)try{$("#control-fileid").attr("checked","checked")}catch(i){}else try{$("#control-fileid").removeAttr("checked")}catch(a){}}catch(o){}initContextMenuFile(),initContextMenuDir(),setCheckRelation(),initDropable(),loadAnimationStop(),removeCheckboxBorder(),updateToolbarStatus(),$("#directory-container .basedir ul li").removeClass("dir-open").addClass("dir-normal"),$('#directory-container .basedir ul li[data-file-path="'+filepath+'"]').addClass("dir-open")});let pth="";return $.get("tool-load-dir.php",{seldir:filepath},function(e){$(".dir-control").each(function(t){"/"==(pth=$(this).attr("data-file-location")+"/"+$(this).attr("data-file-name"))[pth.length]&&(pth=pth.substring(0,pth.length-1)),"string"==typeof pth&&pth.startsWith("/")&&(pth=pth.substring(1)),filepath==pth&&($(this).children("ul").remove(),$(this).append(e))})}),ret}skipondrop=!1,$(".row-data-dir").css({left:"0px",top:"0px","z-index":0,opacity:1}),$(".row-data-file").css({left:"0px",top:"0px","z-index":0,opacity:1})}function selectFile(e){skipondrop||selectFileIndex(e),skipondrop=!1,$(".row-data-dir").css({left:"0px",top:"0px","z-index":0,opacity:1}),$(".row-data-file").css({left:"0px",top:"0px","z-index":0,opacity:1})}function removeCheckboxBorder(){$("#file-container input[type=checkbox]").each(function(e){$(this).css({border:"none",padding:"0"})})}function initSortable(){$(document).on("click",".sort-holder",function(){let e=$("#address").val(),t=$(this).attr("data-sortby"),i=$(this).attr("data-sortorder"),a=[];$(".fileid:checked").each(function(e){a[a.length]=$(this).val()}),openDir(e,a,t,i)})}function showPermission(e){(e+="").length>3&&(e=e.substring(e.length-3));let t=parseInt(e.substring(0,1)),i=parseInt(e.substring(1,1)),a=parseInt(e.substring(2,1)),o=(t>>2)%2,l=(t>>1)%2,n=(i>>2)%2,r=(i>>1)%2,d=(a>>2)%2,s=(a>>1)%2;return{user_execute:t%2,user_write:l,user_read:o,group_execute:i%2,group_write:r,group_read:n,world_execute:a%2,world_write:s,world_read:d}}function initPermission(){$(document).on("click",".permission-info",function(){let e=$(this).text()+"";try{$("#perms-dialog").dialog("destroy")}catch(t){}let i=showPermission(e),a;for(a in i)$("."+a).text(1==parseInt(i[a])?"Allowed":"Disallowed");$("#perms-dialog").dialog({resizable:!1,modal:!0,width:280,height:165}),$(".permission-table").fadeIn(200)})}function showInformation(){return $("#common-dialog-inner").html(""),$("#common-dialog").dialog({modal:!0,title:"Information",width:400,height:310,buttons:{Close:function(){$(this).dialog("destroy")}}}),$.get("tool-info.php",{},function(e){$("#common-dialog-inner").html(e)}),!1}function searchFile(){let e=$("#address").val(),t='<div class="search-container"><div class="search-inner"><div class="search-form"><form name="searchform"><div class="search-direactory"><div class="search-label">Location</div><div class="search-input"><input type="text" name="sdir" id="sdir" class="input-search" readonly="readonly" /></div></div><div class="search-query"><div class="search-label">Filter</div><div class="search-input"><input type="text" name="sfile" id="sfile" class="input-search" /></div></div></form></div><div class="search-result"><div class="loading-animation">Loading directory content...</div></div></div></div>',i=$("body").width()-14,a=$("body").height()-14,o=a-136;$("#common-dialog").dialog({modal:!0,title:"Search File",width:i,height:a}),$("#common-dialog-inner").html(t),$(".search-result").css({height:o+"px",overflow:"auto"}),$(document).on("keyup","#sfile",function(){filterFile($(this).val())}),$(document).on("change","#sfile",function(){filterFile($(this).val())}),$("#sdir").val(e),$("#sfile").select(),$.get("tool-search-file.php",{dir:e},function(e){$(".search-result").html(e),normalizeTable()})}function normalizeTable(){$(".file-result-table tbody tr").each(function(e,t){$(this).attr("data-file-name-lower",$(this).attr("data-file-name").toLowerCase())})}function filterFile(e){e=e.toLowerCase(),$(".file-result-table").css({display:""}),""==e?$(".file-result-table tbody tr").css({display:""}):($(".file-result-table tbody tr").css({display:"none"}),$('.file-result-table tbody tr[data-file-name-lower*="'+e+'"]').css({display:""})),0==$(".file-result-table tbody tr:visible").length&&$(".file-result-table").css({display:"none"})}function initEXIF(){$(document).on("click",".capture-info",function(){try{$("#exif-dialog").dialog("destroy")}catch(e){}$("#exif-dialog").remove(),$("#dialogs").append('<div id="exif-dialog"><div id="exif-dialog-inner"></div></div>');let jsdata,key,obj=eval(decodeURIComponent($(this).attr("data-exif")))[0],html='<table width="100%" border="0" cellspacing="1" cellpadding="2" class="row-table exif-table">';for(key in html+="<tbody>",obj)html+='<tr><td width="50%">'+key+"</td><td>"+obj[key]+"</td></tr>";html+="</tbody></table>",$("#exif-dialog-inner").html(html),$("#exif-dialog").dialog({resizable:!1,modal:!0,title:"Capture Information",width:400,height:410,buttons:{Close:function(){$("#exif-dialog").dialog("destroy")}}})})}function relative2absolute(e){return vabs+e.substring(vrel.length)}function absolute2relative(e){return vrel+e.substring(vabs.length)}let ca=!1,focusOnInput=!1;function toggleFocusInput(){$(document).on("focus",":input",function(){focusOnInput=!0}),$(document).on("blur",":input",function(){focusOnInput=!1})}function initHotKey(){toggleFocusInput(),$(document).on("keypress",function(e){e.ctrlKey&&!focusOnInput&&((65==e.which||97==e.which)&&(selectAll(ca=!ca),e.preventDefault()),(67==e.which||99==e.which)&&(copySelectedFile(),e.preventDefault()),(86==e.which||118==e.which)&&(pasteFile(),e.preventDefault()),(88==e.which||120==e.which)&&(cutSelectedFile(),e.preventDefault()),(70==e.which||102==e.which)&&(searchFile(),e.preventDefault()),(68==e.which||100==e.which)&&(thumbnail(),e.preventDefault()))})}function FileDragHover(e){e.stopPropagation(),e.preventDefault(),"dragover"==e.type?$(".file-area").addClass("file-area-hover"):$(".file-area").removeClass("file-area-hover")}function FileSelectHandler(e){FileDragHover(e);let t=e.target.files||e.dataTransfer.files,i=new FormData,a='<div class="file-upload-caption">Uploading...</div>';for(let o of(a+='<div class="progressbar" style="margin:5px 0px;height:10px; background-color:#EEEEEE;"><div class="progressbar-inner" style="height:10px;background-color:rgb(23, 96, 125);width:0%;"></div></div>',a+='<div class="file-upload" style="height:180px;">',t))i.append("images[]",o),a+='<div class="file-upload-item">'+o.name+"</div>";overlayDialog(a+="</div>",360,224),xhr.open("POST","tool-upload-file-multi.php?targetdir="+encodeURIComponent($("#address").val())),xhr.onload=function(){200===xhr.status&&(refreshList(),closeOverlayDialog())},xhr.upload.addEventListener("progress",progressHandler,!1),xhr.addEventListener("load",completeHandler,!1),xhr.addEventListener("error",errorHandler,!1),xhr.addEventListener("abort",abortHandler,!1),xhr.send(i)}function progressHandler(e){let t=e.loaded/e.total*100;$(".progressbar-inner").css({width:t+"%"})}function completeHandler(e){let t=e.target.responseText,i=$.parseJSON(t);$(".progressbar-inner").css({width:"0%"}),i.success&&closeOverlayDialog()}function errorHandler(e){jqAlert("Uploading error.","Error")}function abortHandler(e){jqAlert("Process aborted.","Aborted")}function initDragDropUpload(){if(window.File&&window.FileList&&window.FileReader){let e=$(".file-area")[0];xhr.upload&&(e.addEventListener("dragover",FileDragHover,!1),e.addEventListener("dragleave",FileDragHover,!1),e.addEventListener("drop",FileSelectHandler,!1),e.style.display="block")}}function cookieRead(e){let t="",i=e+"=";if(document.cookie.length>0){let a=document.cookie.indexOf(i);if(-1!=a){a+=i.length;let o=document.cookie.indexOf(";",a);-1==o&&(o=document.cookie.length),t=decodeURI(document.cookie.substring(a,o))}}return t}function cookieWrite(e,t,i){let a="";null!=i&&(a=";expires="+(a=new Date(new Date().getTime()+36e5*i)).toGMTString()),document.cookie=e+"="+encodeURI(t)+a}