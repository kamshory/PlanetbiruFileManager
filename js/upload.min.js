!function(){let e=document.getElementById("images"),n=!1;function t(e){let n=document.getElementById("image-list"),t=document.createElement("li"),a=document.createElement("img");a.src=e,t.appendChild(a),n.appendChild(t)}window.FormData?n=new FormData:$(".upload-button").css("display","inline"),e.addEventListener("change",function(e){window.FormData&&$("#response").html("Uploading . . .");let a=0,i=this.files.length,l,s;for(;a<i;a++)(s=this.files[a]).type.match(/image.*/)?(window.FileReader&&((l=new FileReader).onloadend=function(e){t(e.target.result)},l.readAsDataURL(s)),n&&n.append("images[]",s)):n.append("images[]",s);if(n){let d=$("#address").val();$.ajax({url:"tool-upload-file.php?targetdir="+encodeURIComponent(d),type:"POST",data:n,processData:!1,contentType:!1,success:function(e){"SUCCESS"==e?($("#response").html("File has been uploaded."),openDir()):"READONLY"==e?(openDir(),$("#response").html("&nbsp;"),jqAlert("This operation is disabled on read only mode.","Readonly"),n=new FormData):("DENIED"==e||"FORBIDDEN"==e)&&(openDir(),$("#response").html("&nbsp;"),jqAlert("Uploading file is forbidden.","Forbidden"),n=new FormData)}})}},!1)}();